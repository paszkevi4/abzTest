{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\J\\\\Desktop\\\\abzTest\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\J\\\\Desktop\\\\abzTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\J\\\\Desktop\\\\abzTest\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import sass from'./registrationPage.module.sass';import Form from'./form';import{connect}from'react-redux';import{apiRequest}from'../../API/api';import{setTokenThunk,setPositionsThunk}from'../../Redux/regReducer';import{setUpdatedUsersThunk}from'../../Redux/usersReducer';import x from'./../../assets/x.png';import ModalWindow from\"./modalWindow\";var RegistrationPage=function RegistrationPage(props){/*request relevant token and vacant positions*/useEffect(function(){props.setTokenThunk();props.setPositionsThunk();},[]);/*modal window state. is not shown by default*/var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];/*function changes modal window state*/var switchModal=function switchModal(){setShowModal(!showModal);};/*local state used for holding uploaded photo name to show it in custom input*/var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),photo=_useState4[0],addPhoto=_useState4[1];/*function overwrites uploaded photo name */var onPhotoAdded=function onPhotoAdded(event){addPhoto(event.target.files[0]);};/*function called once submiting valid form initiated. shows modal window, sends data to server\r\n    and requests new users data*/var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(formData){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowModal(!showModal);_context.next=3;return apiRequest.register(formData.name,formData.email,formData.phone,Number(formData.position_id),photo,props.token);case 3:props.setUpdatedUsersThunk();case 4:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:sass.registrationPage},/*#__PURE__*/React.createElement(\"a\",{className:sass.regAnchor,name:\"registrationPage\"}),/*#__PURE__*/React.createElement(\"h1\",null,\"Register to get a work\"),/*#__PURE__*/React.createElement(\"p\",{className:sass.regSubtitle},\"Attention! After successful registration and alert, update the list of users in the block from the top\"),/*#__PURE__*/React.createElement(Form,{onSubmit:onSubmit,positions:props.positions,onPhotoAdded:onPhotoAdded}),showModal?/*#__PURE__*/React.createElement(ModalWindow,{switchModal:switchModal}):null);};/*connecting component to store*/var mapStateToProps=function mapStateToProps(state){return{token:state.regData.token,positions:state.regData.positions};};var RegistrationPageContainer=connect(mapStateToProps,{setTokenThunk:setTokenThunk,setPositionsThunk:setPositionsThunk,setUpdatedUsersThunk:setUpdatedUsersThunk})(RegistrationPage);export default RegistrationPageContainer;","map":{"version":3,"sources":["C:/Users/J/Desktop/abzTest/src/components/registerForm/registrationPage.jsx"],"names":["React","useEffect","useState","sass","Form","connect","apiRequest","setTokenThunk","setPositionsThunk","setUpdatedUsersThunk","x","ModalWindow","RegistrationPage","props","showModal","setShowModal","switchModal","photo","addPhoto","onPhotoAdded","event","target","files","onSubmit","formData","register","name","email","phone","Number","position_id","token","registrationPage","regAnchor","regSubtitle","positions","mapStateToProps","state","regData","RegistrationPageContainer"],"mappings":"yVAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,IAAP,KAAiB,gCAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,OAAQC,OAAR,KAAsB,aAAtB,CACA,OAAQC,UAAR,KAAyB,eAAzB,CACA,OAAQC,aAAR,CAAuBC,iBAAvB,KAA+C,wBAA/C,CACA,OAAQC,oBAAR,KAAmC,0BAAnC,CACA,MAAOC,CAAAA,CAAP,KAAc,sBAAd,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,KAAD,CAAW,CAEhC,+CACAZ,SAAS,CAAE,UAAM,CACbY,KAAK,CAACN,aAAN,GACAM,KAAK,CAACL,iBAAN,GACH,CAHQ,CAGN,EAHM,CAAT,CAKA,+CARgC,cASAN,QAAQ,CAAE,KAAF,CATR,wCAS3BY,SAT2B,eAShBC,YATgB,eAWhC,uCACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBD,YAAY,CAAC,CAACD,SAAF,CAAZ,CACH,CAFD,CAIA,+EAhBgC,eAiBRZ,QAAQ,CAAE,IAAF,CAjBA,yCAiB3Be,KAjB2B,eAiBpBC,QAjBoB,eAmBhC,4CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC5BF,QAAQ,CAACE,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAR,CACH,CAFD,CAIA;iCAEA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAMC,QAAN,kHACbT,YAAY,CAAC,CAACD,SAAF,CAAZ,CADa,sBAENR,CAAAA,UAAU,CAACmB,QAAX,CAAoBD,QAAQ,CAACE,IAA7B,CAAmCF,QAAQ,CAACG,KAA5C,CAAmDH,QAAQ,CAACI,KAA5D,CACHC,MAAM,CAACL,QAAQ,CAACM,WAAV,CADH,CAC2Bb,KAD3B,CACkCJ,KAAK,CAACkB,KADxC,CAFM,QAIblB,KAAK,CAACJ,oBAAN,GAJa,sDAAH,kBAARc,CAAAA,QAAQ,4CAAd,CAOA,mBACI,2BAAK,SAAS,CAAEpB,IAAI,CAAC6B,gBAArB,eACI,yBAAG,SAAS,CAAE7B,IAAI,CAAC8B,SAAnB,CAA8B,IAAI,CAAC,kBAAnC,EADJ,cAEI,uDAFJ,cAGI,yBAAG,SAAS,CAAE9B,IAAI,CAAC+B,WAAnB,2GAHJ,cAKI,oBAAC,IAAD,EAAM,QAAQ,CAAEX,QAAhB,CAA0B,SAAS,CAAEV,KAAK,CAACsB,SAA3C,CAAsD,YAAY,CAAEhB,YAApE,EALJ,CAMML,SAAS,cAAG,oBAAC,WAAD,EAAa,WAAW,CAAEE,WAA1B,EAAH,CAA8C,IAN7D,CADJ,CAUH,CA3CD,CA6CA,iCACA,GAAMoB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,KAAD,CAAW,CAC/B,MAAO,CACHN,KAAK,CAAEM,KAAK,CAACC,OAAN,CAAcP,KADlB,CAEHI,SAAS,CAAEE,KAAK,CAACC,OAAN,CAAcH,SAFtB,CAAP,CAIH,CALD,CAOA,GAAMI,CAAAA,yBAAyB,CAAGlC,OAAO,CAAE+B,eAAF,CAAmB,CAAC7B,aAAa,CAAbA,aAAD,CAAgBC,iBAAiB,CAAjBA,iBAAhB,CAAmCC,oBAAoB,CAApBA,oBAAnC,CAAnB,CAAP,CAAoFG,gBAApF,CAAlC,CAEA,cAAe2B,CAAAA,yBAAf","sourcesContent":["import React, {useEffect, useState} from 'react'\r\nimport sass from './registrationPage.module.sass'\r\nimport Form from './form'\r\nimport {connect} from 'react-redux'\r\nimport {apiRequest} from '../../API/api'\r\nimport {setTokenThunk, setPositionsThunk} from '../../Redux/regReducer'\r\nimport {setUpdatedUsersThunk} from '../../Redux/usersReducer'\r\nimport x from './../../assets/x.png'\r\nimport ModalWindow from \"./modalWindow\";\r\n\r\nconst RegistrationPage = (props) => {\r\n\r\n    /*request relevant token and vacant positions*/\r\n    useEffect( () => {\r\n        props.setTokenThunk()\r\n        props.setPositionsThunk()\r\n    }, [])\r\n\r\n    /*modal window state. is not shown by default*/\r\n    let [showModal, setShowModal] = useState (false)\r\n\r\n    /*function changes modal window state*/\r\n    const switchModal = () => {\r\n        setShowModal(!showModal)\r\n    }\r\n\r\n    /*local state used for holding uploaded photo name to show it in custom input*/\r\n    let [photo, addPhoto] = useState (null)\r\n\r\n    /*function overwrites uploaded photo name */\r\n    const onPhotoAdded = (event) => {\r\n        addPhoto(event.target.files[0])\r\n    }\r\n\r\n    /*function called once submiting valid form initiated. shows modal window, sends data to server\r\n    and requests new users data*/\r\n    const onSubmit = async(formData) => {\r\n        setShowModal(!showModal)\r\n        await (apiRequest.register(formData.name, formData.email, formData.phone,\r\n            Number(formData.position_id), photo, props.token) )\r\n        props.setUpdatedUsersThunk()\r\n    }\r\n\r\n    return (\r\n        <div className={sass.registrationPage}>\r\n            <a className={sass.regAnchor} name=\"registrationPage\"></a>\r\n            <h1>Register to get a work</h1>\r\n            <p className={sass.regSubtitle}>Attention! After successful registration and alert,\r\n                update the list of users in the block from the top</p>\r\n            <Form onSubmit={onSubmit} positions={props.positions} onPhotoAdded={onPhotoAdded}/>\r\n            { showModal ? <ModalWindow switchModal={switchModal}/> : null }\r\n        </div>\r\n    )\r\n}\r\n\r\n/*connecting component to store*/\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        token: state.regData.token,\r\n        positions: state.regData.positions\r\n    }\r\n}\r\n\r\nconst RegistrationPageContainer = connect (mapStateToProps, {setTokenThunk, setPositionsThunk, setUpdatedUsersThunk})(RegistrationPage)\r\n\r\nexport default RegistrationPageContainer"]},"metadata":{},"sourceType":"module"}